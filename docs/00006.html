<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Frameset//EN">
<html>
<head>
<title>Running the Demonstration</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="generator" content="Doc-O-Matic" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <link rel="STYLESHEET" href="default.css" type="text/css" />

<script type="text/javascript" src="scripts.js"></script>
</head>
<body class="Element700" onload="onBodyLoadEx('frames.html', 'topic', '00006.html');" onmousedown="onBodyMouseDown();">

<!-- Begin Popups -->

<!-- End Popups -->

<!-- Begin Page Header -->
<div class="Element710" id="areafixed">
<div class="Element94">
<a href="00001.html" target="topic">Bluetooth Demonstrations</a> &gt; <a href="00002.html" target="topic">BM64 and BM71 Driver Demonstrations</a> &gt; <a href="00003.html" target="topic">bm64_a2dp_hfp</a> &gt; <a href="00006.html" target="topic">Running the Demonstration</a></div>
<div class="Element92">
<table width="100%" cellspacing="0" cellpadding="0">
<tr><td width="25%">
<div class="Element1">
MPLAB Harmony Bluetooth Help</div>
</td><td width="25%">
<div class="Element2">
<a href="contents.html" target="tocidx">Contents</a> | <a href="00020.html" target="topic">Home</a></div>
</td><td width="25%">
<div class="Element90">
<a href="00005.html" target="topic">Previous</a> | <a href="00003.html" target="topic">Up</a> | <a href="00007.html" target="topic">Next</a></div>
</td><td width="25%">
<div class="Element96">
<a href="mailto:docerrors@microchip.com&subject=MPLAB Harmony Documentation Feedback (Topic ID: APPS BLUETOOTH BM64_a2dp_hfp_run Topic Title: Running the Demonstration)&body=Thank you for your feedback! Please include a description of your feedback, and indicate whether you are reporting an an error in the documentation or an enhancement.">Documentation Feedback</a><br> <a href="http://support.microchip.com" target="_blank">Microchip Support</a></div>
</td></tr></table><div class="Element5">
Running the Demonstration</div>
</div>
</div>

<!-- End Page Header -->

<!-- Begin Client Area -->
<div class="Element720" id="areascroll">
<div class="Element721">

<!-- Begin Page Content -->
<a name="PageContent"></a><div class="Element58">
<a name="4465736372697074696F6E"></a><div class="Element11">
<div class="Element10">
<p class="Element10">
Do the following to run the demonstration:</p>
<ol class="Element630">
<li value="1" class="Element600">Using the <a href="00011.html" target="topic">BM64_bootloader</a> application, if you have not done so, configure the BM64 as an I2S slave device and give it a unique device name. (If using the BTADK for this project, you will need to use either the PIC32 MZ EF Curiosity 2.0 or E70 Xplained Ultra version of the BM64_bootloader since there isn't one for the BTADK.)</li>
<li value="2" class="Element600">Connect a pair of headphones to the headphone out connector on the AK4954 Codec Daughter Board.</li>
<li value="3" class="Element600">Compile the application, program the target device, and run it. While compiling, select the appropriate MPLAB X IDE project configuration. Refer to Building the Application for details.</li>
<li value="4" class="Element600">Press and hold the Pair Button on the development board (see Table 1) to put the BM64 Module into pairing mode, indicated by the two LEDs on the BM64 Module flashing alternately.</li>
<li value="5" class="Element600">In the Bluetooth Settings of your smartphone, find the name of the BM64 which you set up in Step 1, then select and pair with it. The two LEDs on the BM64 Module should stop flashing, and instead just one should flash twice every few seconds. Meanwhile the Connection LED should be lit (see Table 2).</li>
<li value="6" class="Element600">Go into an application on the smartphone that outputs audio, such as Music. Select a song and press play. The Play LED should now be lit and you should hear audio from the headphones.</li>
<li value="7" class="Element600">Use the Volume Button to increase the volume, the Play/Pause Button to alternately pause and resume the playback, the Next and Previous Buttons to go to the next or previous song (or use a long press of Next/Previous for fast forward or rewind). Set Table 1 below. The LEDs should change state as shown in Table 2.</li>
<li value="8" class="Element600">Use a long press of the Next Button to disconnect from the smartphone, and a another long press of Next Button to reconnect. Use a long press of Volume Button and Play/Pause Button together to forget all previous pairings.</li>
<li value="9" class="Element600">Call the smartphone from another phone such as a wired desk phone. When the smartphone is answered, either automatically or manually, the audio should switch over to the BM64. Talking into the handset of the desk phone should come out of the headphones, and talking into a microphone connected to the BM64 Module should come out of the desk phone handset. During the call, the LEDs should change state as shown in Table 2. When the call is terminated, any A2DP streaming that was in progress should resume.</li>
</ol><div class="Element15">
Control Descriptions</div>
<p class="Element10">
Table 1 -- Button Assignments </p><div class="Element63">
<div class="TableDiv">
<table cellspacing="0" class="Table3">
<tr>
<td class="Element65" valign="top" width="20%">
<div class="Element66">
Bluetooth Audio Dev Kit&nbsp;</div></td><td class="Element65" valign="top" width="11%">
<div class="Element66">
PIC32 MZ EF Curiosity 2.0&nbsp;</div></td><td class="Element65" valign="top" width="69%">
<div class="Element66">
Description&nbsp;</div></td></tr><tr>
<td class="Element67" valign="top" width="20%">
<div class="Element68">
SW1&nbsp;</div></td><td class="Element67" valign="top" width="11%">
<div class="Element68">
SW1&nbsp;</div></td><td class="Element67" valign="top" width="69%">
<div class="Element68">
Volume, in four increments: mute, 33%, 66%, 100% (Start Pairing if held down &gt; 1 second)&nbsp;</div></td></tr><tr>
<td class="Element67" valign="top" width="20%">
<div class="Element68">
SW3&nbsp;</div></td><td class="Element67" valign="top" width="11%">
<div class="Element68">
SW4&nbsp;</div></td><td class="Element67" valign="top" width="69%">
<div class="Element68">
Next Song (Fast Forward if held down &gt; 1 second)&nbsp;</div></td></tr><tr>
<td class="Element67" valign="top" width="20%">
<div class="Element68">
SW4&nbsp;</div></td><td class="Element67" valign="top" width="11%">
<div class="Element68">
SW3&nbsp;</div></td><td class="Element67" valign="top" width="69%">
<div class="Element68">
Play/Pause (Disconnect if held &gt; 1 second)&nbsp;</div></td></tr><tr>
<td class="Element67" valign="top" width="20%">
<div class="Element68">
SW5&nbsp;</div></td><td class="Element67" valign="top" width="11%">
<div class="Element68">
SW2&nbsp;</div></td><td class="Element67" valign="top" width="69%">
<div class="Element68">
Previous Song (Rewind if held down &gt; 1 second)&nbsp;</div></td></tr></table></div></div>
<p class="Element10">
Table 2 -- LED States </p><div class="Element63">
<div class="TableDiv">
<table cellspacing="0" class="Table3">
<tr>
<td class="Element65" valign="top" width="20%">
<div class="Element66">
Bluetooth Audio Dev Kit&nbsp;</div></td><td class="Element65" valign="top" width="12%">
<div class="Element66">
PIC32 MZ EF Curiosity 2.0&nbsp;</div></td><td class="Element65" valign="top" width="68%">
<div class="Element66">
Description&nbsp;</div></td></tr><tr>
<td class="Element67" valign="top" width="20%">
<div class="Element68">
D5&nbsp;</div></td><td class="Element67" valign="top" width="12%">
<div class="Element68">
LED1&nbsp;</div></td><td class="Element67" valign="top" width="68%">
<div class="Element68">
Lit if 8/16 KJHz (HFP mode)&nbsp;</div></td></tr><tr>
<td class="Element67" valign="top" width="20%">
<div class="Element68">
D6&nbsp;</div></td><td class="Element67" valign="top" width="12%">
<div class="Element68">
LED2&nbsp;</div></td><td class="Element67" valign="top" width="68%">
<div class="Element68">
Lit if Bluetooth module connected to host&nbsp;</div></td></tr><tr>
<td class="Element67" valign="top" width="20%">
<div class="Element68">
D7&nbsp;</div></td><td class="Element67" valign="top" width="12%">
<div class="Element68">
LED3&nbsp;</div></td><td class="Element67" valign="top" width="68%">
<div class="Element68">
Lit if 44.1/48 KHz mode (A2DP streaming)&nbsp;</div></td></tr><tr>
<td class="Element67" valign="top" width="20%">
<div class="Element68">
D8&nbsp;</div></td><td class="Element67" valign="top" width="12%">
<div class="Element68">
LED4 Blue&nbsp;</div></td><td class="Element67" valign="top" width="68%">
<div class="Element68">
Lit if Fast Forward Mode (for PIC32 MZ EF Curiosity 2.0 board, blinking if volume muted)&nbsp;</div></td></tr><tr>
<td class="Element67" valign="top" width="20%">
<div class="Element68">
D8&nbsp;</div></td><td class="Element67" valign="top" width="12%">
<div class="Element68">
LED4 Yellow&nbsp;</div></td><td class="Element67" valign="top" width="68%">
<div class="Element68">
Lit if Rewind Mode (for PIC32 MZ EF Curiosity 2.0 board, blinking if volume muted)&nbsp;</div></td></tr><tr>
<td class="Element67" valign="top" width="20%">
<div class="Element68">
D9&nbsp;</div></td><td class="Element67" valign="top" width="12%">
<div class="Element68">
LED4 Green&nbsp;</div></td><td class="Element67" valign="top" width="68%">
<div class="Element68">
Lit if Playing (blinking if volume muted)&nbsp;</div></td></tr><tr>
<td class="Element67" valign="top" width="20%">
<div class="Element68">
&nbsp;</div></td><td class="Element67" valign="top" width="12%">
<div class="Element68">
LED4 Red&nbsp;</div></td><td class="Element67" valign="top" width="68%">
<div class="Element68">
Lit if Paused/Stopped (blinking if volume muted)<br>For Bluetooth Audio Dev Kit, D8 and D9 are both off if paused/stopped&nbsp;</div></td></tr></table></div></div>
</div>
</div>
</div>
<!-- End Page Content -->

<!-- Begin Page Footer -->
<div class="Element95">
<a href="00001.html" target="topic">Bluetooth Demonstrations</a> &gt; <a href="00002.html" target="topic">BM64 and BM71 Driver Demonstrations</a> &gt; <a href="00003.html" target="topic">bm64_a2dp_hfp</a> &gt; <a href="00006.html" target="topic">Running the Demonstration</a></div>
<div class="Element93">
<table width="100%" cellspacing="0" cellpadding="0">
<tr><td width="25%">
<div class="Element3">
MPLAB Harmony Bluetooth Help</div>
</td><td width="25%">
<div class="Element4">
<a href="contents.html" target="tocidx">Contents</a> | <a href="00020.html" target="topic">Home</a></div>
</td><td width="25%">
<div class="Element91">
<a href="00005.html" target="topic">Previous</a> | <a href="00003.html" target="topic">Up</a> | <a href="00007.html" target="topic">Next</a></div>
</td><td width="25%">
<div class="Element97">
<a href="mailto:docerrors@microchip.com&subject=MPLAB Harmony Documentation Feedback (Topic ID: APPS BLUETOOTH BM64_a2dp_hfp_run Topic Title: Running the Demonstration)&body=Thank you for your feedback! Please include a description of your feedback, and indicate whether you are reporting an an error in the documentation or an enhancement.">Documentation Feedback</a><br> <a href="http://support.microchip.com" target="_blank">Microchip Support</a></div>
</td></tr></table></div>

<!-- End Page Footer -->
</div>
</div>

<!-- End Client Area -->
</body></html>